import React, { Component } from 'react';
import UIkit from 'uikit';
import ReactDOM from 'react-dom';

import GradientCard from '../GradientCard/GradientCard';
import './Home.css';

function rgb2hex(rgb){
  rgb = rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
  return (rgb && rgb.length === 4) ? "#" +
    ("0" + parseInt(rgb[1],10).toString(16)).slice(-2) +
    ("0" + parseInt(rgb[2],10).toString(16)).slice(-2) +
    ("0" + parseInt(rgb[3],10).toString(16)).slice(-2) : '';
}

class GradientCardContainer extends Component {

  constructor(props) {
    super(props);
    this.state = {
      gradientCards:this.getGradientCardArray()
    };
  }

  getRandomAngle() {
    return Math.floor((Math.random() * 360));
  }

  getRandomGreyVal() {
    return Math.floor((Math.random() * 256));
  }

  getRandomColor() {
  return 'rgb(' + this.getRandomGreyVal() + ',' + this.getRandomGreyVal() + ',' + this.getRandomGreyVal() + ')';
}

  generateRandomGradient(count = 2) {

    if(count>4 || count<2)
      count = 2;

    let gradientColors =[];

    for (let i=0;i<count;i++)
      gradientColors.push(this.getRandomColor());

    gradientColors  = gradientColors.map((color)=>{
      return rgb2hex(color);
    });

    return gradientColors;
  }

  getGradientCardArray() {
    let cardArray = [];
    // Get array of random gradients cards
    for (let i=0;i<this.props.cardCount;i++) {
      cardArray.push(<GradientCard gradientDeg={this.getRandomAngle()} gradientColors={this.generateRandomGradient(this.props.gradientColorCount)}/>);
    }

    return cardArray;
  }

  handleClick() {
    UIkit.notification({
      message:'Reloaded All Gradients',
      status:'primary'
    });

    this.setState({
      gradientCards:this.getGradientCardArray()
    });

    ReactDOM.findDOMNode(this).scrollIntoView();
  }

  loadMore() {
    this.setState({
      gradientCards:this.state.gradientCards.concat(this.getGradientCardArray())
    });
  }

  render() {

    return(
      <div class="uk-container uk-text-center">
        <button class="uk-button uk-button-danger reload-btn" onClick={this.handleClick.bind(this)}><span is  uk-icon="icon: refresh;ratio:2"></span></button>
        <div class="uk-grid">
          {this.state.gradientCards}
        </div>
        <button class="uk-button uk-button-danger uk-margin-medium-top uk-margin-medium-bottom" onClick={this.loadMore.bind(this)}>Load More</button>
      </div>
    )
  }
}


class Home extends Component {
  render() {
    return (
      <div class="Home">
        {/*Hero Title*/}
        <div class="uk-text-center hero-container uk-container">
          <svg class="hero-svg" viewBox="0 0 911 102" xmlns="http://www.w3.org/2000/svg">
            <title>
              Random Gradients
            </title>
            <defs>
              <linearGradient x1="1.761%" y1="50%" x2="98.418%" y2="50%" id="hero-title">
                <stop stopColor="#FE5196" offset="0%"/>
                <stop stopColor="#F77062" offset="100%"/>
              </linearGradient>
            </defs>
            <path d="M36.98 121.36v-2.28c4.96-.24 8.32-1.52 10.08-3.84 1.76-2.32 3.4-7.68 4.92-16.08L63.5 32.8c-16.4 1.36-29.06 4.9-37.98 10.62C16.6 49.14 12.14 56.6 12.14 65.8c0 4.16 1.44 7.68 4.32 10.56 2 1.92 4.64 3.38 7.92 4.38 3.28 1 5.98 1.56 8.1 1.68 2.12.12 3.26.1 3.42-.06v2.52c-9.44 0-16.44-2.24-21-6.72-3.36-3.12-5.04-7.24-5.04-12.36 0-11.44 5.98-20.28 17.94-26.52 11.96-6.24 28.86-9.36 50.7-9.36 13.6 0 23.26 1.84 28.98 5.52 5.72 3.68 8.58 8.7 8.58 15.06 0 6.36-2.18 11.82-6.54 16.38-4.36 4.56-10.1 8.08-17.22 10.56 10.4 21.6 17.08 34.58 20.04 38.94 2.96 4.36 6.52 6.54 10.68 6.54 2.48 0 4.7-.78 6.66-2.34 1.96-1.56 3.34-3.66 4.14-6.3h3c-2.56 8.32-8.84 12.48-18.84 12.48-6.32 0-11.54-1.5-15.66-4.5-4.12-3-7.58-7.54-10.38-13.62L78.98 80.56c-3.2.32-5.56.48-7.08.48-.24 1.2-.6 3.24-1.08 6.12-.48 2.88-.88 5.04-1.2 6.48-1.6 8.64-5.62 15.42-12.06 20.34s-13.3 7.38-20.58 7.38zm75.96-70.44c0-12.24-11.12-18.48-33.36-18.72l-7.2 46.2c11.36-.32 20.96-3.18 28.8-8.58s11.76-11.7 11.76-18.9zm51.24 53.16c-7.04 0-10.88-3.08-11.52-9.24-3.52 6.16-7.96 9.24-13.32 9.24s-9.62-1.62-12.78-4.86-4.74-7.78-4.74-13.62c0-9.12 2.24-16.28 6.72-21.48 4.48-5.2 10.28-7.8 17.4-7.8 5.84 0 9.72 2.76 11.64 8.28.4-2.4.84-4.8 1.32-7.2 5.92 0 10.32-.24 13.2-.72l1.56-.36-8.28 45.36c2.4-.24 4.4-1.36 6-3.36l1.8 1.44c-2.4 2.88-5.4 4.32-9 4.32zm-27.42-4.86c.92 1.4 2.34 2.1 4.26 2.1s3.88-1.04 5.88-3.12c2.64-2.72 4.76-6.16 6.36-10.32.24-1.04.7-3.54 1.38-7.5.68-3.96 1.26-7.22 1.74-9.78-.24-3.04-1.08-5.68-2.52-7.92s-3.24-3.36-5.4-3.36c-3.92 0-7.08 3.5-9.48 10.5-2.4 7-3.6 14.3-3.6 21.9 0 3.6.46 6.1 1.38 7.5zm89.58 2.46c1.92 0 3.92-1.12 6-3.36l1.8 1.44c-.56 1.12-1.8 2.12-3.72 3-1.92.88-4.04 1.32-6.36 1.32-7.28 0-10.92-3.28-10.92-9.84 0-2.8.72-7.8 2.16-15 1.44-7.2 2.16-11.92 2.16-14.16 0-3.44-1.64-5.16-4.92-5.16-2.64 0-5.18 1.72-7.62 5.16-2.44 3.44-4.46 8.16-6.06 14.16l-4.08 22.44c2.48-.24 4.52-1.36 6.12-3.36l1.8 1.44c-2.4 2.88-5.4 4.32-9 4.32-3.6 0-6.42-.92-8.46-2.76-2.04-1.84-3.06-4.24-3.06-7.2 0-1.12.64-5.52 1.92-13.2l3.96-22.2c-2.4.24-4.4 1.36-6 3.36l-1.8-1.44c2.4-2.88 5.42-4.32 9.06-4.32 3.64 0 6.46.92 8.46 2.76 2 1.84 3 4.44 3 7.8v.72c3.28-7.52 8.4-11.28 15.36-11.28 4.72 0 8.4 1.34 11.04 4.02 2.64 2.68 3.96 6.38 3.96 11.1 0 2.48-.76 7.26-2.28 14.34-1.52 7.08-2.36 12.38-2.52 15.9zm55.08 2.4c-7.04 0-10.88-3-11.52-9-3.52 6-8 9-13.44 9-5.44 0-9.6-1.54-12.48-4.62-2.88-3.08-4.32-7.3-4.32-12.66 0-9.44 2.24-16.88 6.72-22.32 4.48-5.44 10.28-8.16 17.4-8.16 4.08 0 7.24 1.24 9.48 3.72.96 1.28 1.56 2.24 1.8 2.88l6.48-35.28c-2.4.24-4.4 1.36-6 3.36l-1.8-1.44c2.4-2.88 5.42-4.32 9.06-4.32 3.64 0 6.46.92 8.46 2.76 2 1.84 3 4.44 3 7.8 0 .64-.08 1.68-.24 3.12-3.92 22-7.72 42.92-11.4 62.76 2.4-.24 4.4-1.36 6-3.36l1.8 1.44c-2.4 2.88-5.4 4.32-9 4.32zm-27.06-4.8c.76 1.36 1.96 2.04 3.6 2.04 1.64 0 3.22-.56 4.74-1.68 1.52-1.12 2.8-2.56 3.84-4.32 1.92-2.96 3.28-5.48 4.08-7.56l3.48-18.96c-.16-2.56-1-4.9-2.52-7.02-1.52-2.12-4.12-3.18-7.8-3.18-2.56 0-4.96 3.76-7.2 11.28s-3.36 14.8-3.36 21.84c0 3.68.38 6.2 1.14 7.56zm47.94.18c-3.2-3.08-4.8-6.96-4.8-11.64 0-4.68.42-8.68 1.26-12 .84-3.32 2.22-6.52 4.14-9.6 1.92-3.08 4.82-5.5 8.7-7.26 3.88-1.76 8.72-2.64 14.52-2.64 5.8 0 10.32 1.54 13.56 4.62s4.86 7.3 4.86 12.66c0 9.12-2.42 16.48-7.26 22.08-4.84 5.6-11.82 8.4-20.94 8.4-6.16 0-10.84-1.54-14.04-4.62zm8.76-7.74c0 6.4 1.86 9.6 5.58 9.6 3.72 0 7.04-3.22 9.96-9.66 2.92-6.44 4.38-14.1 4.38-22.98 0-6.72-1.82-10.08-5.46-10.08-3.64 0-6.96 3.06-9.96 9.18-3 6.12-4.5 14.1-4.5 23.94zm85.08 9.96c1.92 0 3.92-1.12 6-3.36l1.8 1.44c-.56 1.12-1.8 2.12-3.72 3-1.92.88-4.04 1.32-6.36 1.32-7.28 0-10.92-3.28-10.92-9.84 0-2.8.72-7.8 2.16-15 1.44-7.2 2.16-11.92 2.16-14.16 0-3.44-1.64-5.16-4.92-5.16-4.96 0-9.12 6.36-12.48 19.08l-4.32 24h-14.4l7.92-44.28c-2.4.24-4.4 1.36-6 3.36l-1.8-1.44c2.4-2.88 5.42-4.32 9.06-4.32 3.64 0 6.46.92 8.46 2.76 2 1.84 3 4.44 3 7.8v.36c3.12-7.28 7.84-10.92 14.16-10.92 4.48 0 8.02 1.22 10.62 3.66 2.6 2.44 4.02 5.86 4.26 10.26 1.52-4.4 3.44-7.82 5.76-10.26 2.32-2.44 5.68-3.66 10.08-3.66s7.92 1.34 10.56 4.02c2.64 2.68 3.96 6.38 3.96 11.1 0 2.48-.76 7.26-2.28 14.34-1.52 7.08-2.36 12.38-2.52 15.9 1.92 0 3.92-1.12 6-3.36l1.8 1.44c-.56 1.12-1.8 2.12-3.72 3-1.92.88-4.04 1.32-6.36 1.32-7.28 0-10.92-3.28-10.92-9.84 0-2.8.72-7.8 2.16-15 1.44-7.2 2.16-11.92 2.16-14.16 0-3.44-1.64-5.16-4.92-5.16-5.76 0-10.4 8.56-13.92 25.68-1.52 7.28-2.36 12.64-2.52 16.08zm87.36-15c0 12 3.88 19.92 11.64 23.76 1.92.24 4.44.36 7.56.36 3.12 0 6.42-.46 9.9-1.38 3.48-.92 6.3-2.1 8.46-3.54 3.04-1.92 5.32-3.76 6.84-5.52.48-1.76 1.14-4.58 1.98-8.46.84-3.88 1.5-6.82 1.98-8.82l2.52.6c-.64 2.48-1.42 5.8-2.34 9.96-.92 4.16-1.6 7.14-2.04 8.94-.44 1.8-1.08 4.12-1.92 6.96-.84 2.84-1.66 4.92-2.46 6.24-.8 1.32-1.88 2.78-3.24 4.38-2.16 2.64-5.6 4.64-10.32 6l-.48-2.52c4.08-.88 7.24-2.86 9.48-5.94 2.24-3.08 4.16-7.42 5.76-13.02-6.48 5.84-14.9 8.76-25.26 8.76-10.36 0-18.32-2.94-23.88-8.82-5.56-5.88-8.34-14.18-8.34-24.9 0-14.48 4.68-26.4 14.04-35.76s21.64-14.04 36.84-14.04c7.04 0 12.12 1.26 15.24 3.78 3.12 2.52 4.68 6.46 4.68 11.82 0 3.6-1.76 8.04-5.28 13.32-3.2 5.12-4.8 9.12-4.8 12h-2.64c0-1.6.32-3.32.96-5.16.64-1.84 1.2-3.16 1.68-3.96.48-.8 1.36-2.24 2.64-4.32 3.12-4.72 4.68-8.6 4.68-11.64 0-6.4-2.64-10.44-7.92-12.12-2.48-.8-5.08-1.2-7.8-1.2-2.72 0-5.6.16-8.64.48-2.8.88-5.46 2.02-7.98 3.42-2.52 1.4-5.14 3.52-7.86 6.36-2.72 2.84-5.04 6.14-6.96 9.9-1.92 3.76-3.52 8.58-4.8 14.46-1.28 5.88-1.92 12.42-1.92 19.62zm61.08-26.04c2.4-2.88 5.42-4.32 9.06-4.32 3.64 0 6.46.92 8.46 2.76 2 1.84 3 4.44 3 7.8v.72c3.6-7.52 8.28-11.28 14.04-11.28 6.16 0 9.24 3.2 9.24 9.6 0 2.64-.88 5.44-2.64 8.4-1.76 2.96-3.52 5.78-5.28 8.46-1.76 2.68-2.64 5.06-2.64 7.14h-2.88c0-2.96 1.72-6.96 5.16-12 3.44-5.04 5.16-8.94 5.16-11.7s-.54-4.64-1.62-5.64-2.68-1.5-4.8-1.5c-2.12 0-4.2.92-6.24 2.76-2.04 1.84-3.74 4.16-5.1 6.96-2.16 4.16-3.6 7.56-4.32 10.2v.12L558.86 103h-14.4l7.92-44.28c-2.4.24-4.4 1.36-6 3.36l-1.8-1.44zm88.68 43.44c-7.04 0-10.88-3.08-11.52-9.24-3.52 6.16-7.96 9.24-13.32 9.24s-9.62-1.62-12.78-4.86-4.74-7.78-4.74-13.62c0-9.12 2.24-16.28 6.72-21.48 4.48-5.2 10.28-7.8 17.4-7.8 5.84 0 9.72 2.76 11.64 8.28.4-2.4.84-4.8 1.32-7.2 5.92 0 10.32-.24 13.2-.72l1.56-.36-8.28 45.36c2.4-.24 4.4-1.36 6-3.36l1.8 1.44c-2.4 2.88-5.4 4.32-9 4.32zm-27.42-4.86c.92 1.4 2.34 2.1 4.26 2.1s3.88-1.04 5.88-3.12c2.64-2.72 4.76-6.16 6.36-10.32.24-1.04.7-3.54 1.38-7.5.68-3.96 1.26-7.22 1.74-9.78-.24-3.04-1.08-5.68-2.52-7.92s-3.24-3.36-5.4-3.36c-3.92 0-7.08 3.5-9.48 10.5-2.4 7-3.6 14.3-3.6 21.9 0 3.6.46 6.1 1.38 7.5zm84.78 4.86c-7.04 0-10.88-3-11.52-9-3.52 6-8 9-13.44 9-5.44 0-9.6-1.54-12.48-4.62-2.88-3.08-4.32-7.3-4.32-12.66 0-9.44 2.24-16.88 6.72-22.32 4.48-5.44 10.28-8.16 17.4-8.16 4.08 0 7.24 1.24 9.48 3.72.96 1.28 1.56 2.24 1.8 2.88l6.48-35.28c-2.4.24-4.4 1.36-6 3.36l-1.8-1.44c2.4-2.88 5.42-4.32 9.06-4.32 3.64 0 6.46.92 8.46 2.76 2 1.84 3 4.44 3 7.8 0 .64-.08 1.68-.24 3.12-3.92 22-7.72 42.92-11.4 62.76 2.4-.24 4.4-1.36 6-3.36l1.8 1.44c-2.4 2.88-5.4 4.32-9 4.32zm-27.06-4.8c.76 1.36 1.96 2.04 3.6 2.04 1.64 0 3.22-.56 4.74-1.68 1.52-1.12 2.8-2.56 3.84-4.32 1.92-2.96 3.28-5.48 4.08-7.56l3.48-18.96c-.16-2.56-1-4.9-2.52-7.02-1.52-2.12-4.12-3.18-7.8-3.18-2.56 0-4.96 3.76-7.2 11.28s-3.36 14.8-3.36 21.84c0 3.68.38 6.2 1.14 7.56zm56.34 4.8c-3.6 0-6.42-.92-8.46-2.76-2.04-1.84-3.06-4.24-3.06-7.2 0-1.04.64-5.4 1.92-13.08l3.96-21.48h-5.04l.24-2.16h5.16c5.92 0 10.28-.24 13.08-.72l1.68-.36-8.28 45.36c2.4-.24 4.4-1.36 6-3.36l1.8 1.44c-2.4 2.88-5.4 4.32-9 4.32zm-4.08-65.4c0-2.4.84-4.46 2.52-6.18 1.68-1.72 3.72-2.58 6.12-2.58s4.46.86 6.18 2.58c1.72 1.72 2.58 3.78 2.58 6.18s-.86 4.44-2.58 6.12c-1.72 1.68-3.78 2.52-6.18 2.52s-4.44-.84-6.12-2.52c-1.68-1.68-2.52-3.72-2.52-6.12zm45.84 17.64c10.16 0 15.24 4.04 15.24 12.12 0 5.04-2.38 8.86-7.14 11.46-4.76 2.6-11.54 3.94-20.34 4.02-.16 2.88-.24 5.16-.24 6.84 0 3.6.82 6.26 2.46 7.98 1.64 1.72 3.7 2.58 6.18 2.58 2.48 0 4.74-.48 6.78-1.44s3.66-2.1 4.86-3.42c1.2-1.32 2.24-2.7 3.12-4.14 1.6-2.64 2.4-4.32 2.4-5.04l2.16.96c-.24 1.28-.96 2.98-2.16 5.1-1.2 2.12-2.52 3.86-3.96 5.22-1.44 1.36-3.56 2.62-6.36 3.78-2.8 1.16-5.92 1.74-9.36 1.74-6.48 0-11.38-1.54-14.7-4.62-3.32-3.08-4.98-7.3-4.98-12.66 0-9.52 2.36-16.98 7.08-22.38 4.72-5.4 11.04-8.1 18.96-8.1zm9.9 5.58c-1.56-1.72-3.88-2.58-6.96-2.58s-6.08 1.84-9 5.52c-2.92 3.68-4.86 9.12-5.82 16.32 16.08-.08 24.12-4.32 24.12-12.72 0-2.64-.78-4.82-2.34-6.54zm58.26 39.78c1.92 0 3.92-1.12 6-3.36l1.8 1.44c-.56 1.12-1.8 2.12-3.72 3-1.92.88-4.04 1.32-6.36 1.32-7.28 0-10.92-3.28-10.92-9.84 0-2.8.72-7.8 2.16-15 1.44-7.2 2.16-11.92 2.16-14.16 0-3.44-1.64-5.16-4.92-5.16-2.64 0-5.18 1.72-7.62 5.16-2.44 3.44-4.46 8.16-6.06 14.16l-4.08 22.44c2.48-.24 4.52-1.36 6.12-3.36l1.8 1.44c-2.4 2.88-5.4 4.32-9 4.32-3.6 0-6.42-.92-8.46-2.76-2.04-1.84-3.06-4.24-3.06-7.2 0-1.12.64-5.52 1.92-13.2l3.96-22.2c-2.4.24-4.4 1.36-6 3.36l-1.8-1.44c2.4-2.88 5.42-4.32 9.06-4.32 3.64 0 6.46.92 8.46 2.76 2 1.84 3 4.44 3 7.8v.72c3.28-7.52 8.4-11.28 15.36-11.28 4.72 0 8.4 1.34 11.04 4.02 2.64 2.68 3.96 6.38 3.96 11.1 0 2.48-.76 7.26-2.28 14.34-1.52 7.08-2.36 12.38-2.52 15.9zM850.7 57.4l3.24-17.76c5.92 0 10.32-.24 13.2-.72l1.56-.36c-1.12 5.6-2.36 11.88-3.72 18.84h14.88l-.24 2.16h-15c-4 20.64-6 33.08-6 37.32 0 2.56 1.36 3.84 4.08 3.84 2.72 0 5.2-1.72 7.44-5.16 2.24-3.44 3.84-7.16 4.8-11.16l2.16.72c-2.96 12.64-9.08 18.96-18.36 18.96-3.84 0-7.04-1.06-9.6-3.18-2.56-2.12-3.84-5.08-3.84-8.88 0-3.8 1.64-14.62 4.92-32.46h-5.88l.24-2.16h6.12zm42.48 43.56c7.92 0 11.88-5.84 11.88-17.52 0-2.88-.42-6.28-1.26-10.2-.84-3.92-1.34-6.36-1.5-7.32-4.88 5.04-10.36 8.08-16.44 9.12v-2.88c5.76-1.28 11.16-4.56 16.2-9.84v-.48c0-1.92.28-3.8.84-5.64.56-1.84 1.12-3.2 1.68-4.08l.84-1.32h2.88c0 3.52.56 6.74 1.68 9.66 1.12 2.92 2.36 5.28 3.72 7.08 1.36 1.8 2.6 4.16 3.72 7.08s1.68 6.14 1.68 9.66c0 5.68-2.14 10.4-6.42 14.16-4.28 3.76-9.42 5.64-15.42 5.64s-10.54-1.36-13.62-4.08c-3.08-2.72-4.62-5.86-4.62-9.42 0-3.56.88-6.12 2.64-7.68 1.76-1.56 3.84-2.34 6.24-2.34 2.4 0 4.38.78 5.94 2.34 1.56 1.56 2.34 3.56 2.34 6s-.76 4.5-2.28 6.18c-1.52 1.68-3.48 2.52-5.88 2.52-1.04 0-2.12-.16-3.24-.48 1.76 2.56 4.56 3.84 8.4 3.84z" transform="translate(-9 -25)" fill="url(#hero-title)" fillRule="evenodd"/>
          </svg>
        </div>
        <GradientCardContainer cardCount={25} gradientColorCount={2}/>
      </div>
    );
  }
}

export default Home;
